<%= CSV.generate_line ["Name", "#{@result.exam.user.name}"], {row_sep: nil} %>
<%= CSV.generate_line ["Email", "#{@result.exam.user.email}"], {row_sep: nil} %>
<%= CSV.generate_line ["Name of course", "#{@result.exam.course.name}"], {row_sep: nil} %>
<%= CSV.generate_line ["Date", "#{@result.updated_at}"], {row_sep: nil} %>
<%= CSV.generate_line ["Correct", "#{@result.score}"], {row_sep: nil} %>
<%= CSV.generate_line ["Number of question", "#{@result.exam.course.questions.choice_question.count}"], {row_sep: nil} %>
<% @result.answers.each_with_index do |answer, index| %>
  <%= CSV.generate_line ["Question #{index+1}", "#{answer.question.content}"], {row_sep: nil} %>
  <% if answer.question.is_choice_question? %>
    <% answer.question.options.each_with_index do |option, index| %>
      <% if answer.option ? answer.option.id == option.id : false %>
        <%= CSV.generate_line ["Option #{index+1}", "#{option.content}", "Selected"], {row_sep: nil} %>
      <% else %>
        <%= CSV.generate_line ["Option #{index+1}", "#{option.content}"], {row_sep: nil} %>
      <% end %>
    <% end %>
    <% if answer.correct %>
      <%= CSV.generate_line ["Result", "Correct"], {row_sep: nil} %>
    <% else %>
      <%= CSV.generate_line ["Result", "Incorrect"], {row_sep: nil} %>
    <% end %>
  <% else %>
    <%= CSV.generate_line ["#{answer.content}"], {row_sep: nil} %>
  <% end %>
<% end %>